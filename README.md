# üêû Patch Evolution Analyzer

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç–≤–æ–ª—é—Ü–∏–∏ –ø–∞—Ç—á–µ–π —è–¥—Ä–∞ Linux —Å –ø–æ–º–æ—â—å—é **Coccinelle**, **Tree-sitter** –∏ —ç–≤—Ä–∏—Å—Ç–∏–∫.  
–¶–µ–ª—å ‚Äî –ø–æ–º–æ—á—å –º–µ–π–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π —è–¥—Ä–∞ –≤ –Ω–æ–≤—ã–µ (–≤ —Ç–æ–º —á–∏—Å–ª–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≥–æ—Ç–æ–≤—ã—Ö –ø–∞—Ç—á–µ–π –¥–ª—è –Ω—É–∂–Ω–æ–π –≤–µ—Ä—Å–∏–∏).

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
analyzer/        # Python-–º–æ–¥—É–ª–∏ –∞–Ω–∞–ª–∏–∑–∞ (AST, ML, —Å–µ–º–∞–Ω—Ç–∏–∫–∞, –æ—Ç—á—ë—Ç—ã)
scripts/         # –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏, –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞—Ç—á–µ–π, –ª–æ–≥–≥–µ—Ä–∞
vendor/          # prebuilt Tree-sitter –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏
models/          # –æ–±—É—á–µ–Ω–Ω—ã–µ ML-–º–æ–¥–µ–ª–∏ (—Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
datasets/        # –¥–∞—Ç–∞—Å–µ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, LKML –¥–ª—è –æ–±—É—á–µ–Ω–∏—è ML)
patches/         # RT –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ç—á–∏
srpms/           # SRPM –ø–∞–∫–µ—Ç—ã (–∏—Å—Ö–æ–¥–Ω–∏–∫–∏ —è–¥–µ—Ä)
kernels/         # –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ vanilla –∏ patched —è–¥–µ—Ä
runs/            # —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—É—Å–∫–æ–≤ (–æ—Ç—á—ë—Ç—ã, –ª–æ–≥–∏)
.github/workflows/ # GitHub Actions –¥–ª—è CI
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
sudo apt-get install -y coccinelle rpm2cpio cpio python3 python3-pip gcc
pip3 install scikit-learn tree-sitter
chmod +x scripts/*.sh
```

### –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
```bash
export SRPM_URL="https://download.copr.fedorainfracloud.org/results/kwizart/kernel-longterm-5.10/epel-8-x86_64/09557158-kernel-longterm/kernel-longterm-5.10.244-200.el8.src.rpm"
export KERNEL_VER="5.10"
bash scripts/run_analysis.sh
```

---

## üìë –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `runs/<timestamp>-<codename>/`:
- `logs/` ‚Äî –ª–æ–≥–∏ –∏ fallback-–∏–Ω—Ñ–æ
- `reports/`:
  - `report-<version>.md` ‚Äî –æ—Ç—á—ë—Ç –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —è–¥—Ä–∞
  - `combined-report.md` ‚Äî –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –≤—Å–µ–º –≤–µ—Ä—Å–∏—è–º

---

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ—Å—Å–∏–∏
```bash
scripts/show_last_log.sh
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
[INFO] –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–µ—Å—Å–∏—è: 2025-10-02-1811-rare-koala
[INFO] –ü—É—Ç—å –∫ –ª–æ–≥–∞–º: runs/2025-10-02-1811-rare-koala/logs/run.log
--------------------------------------------------
[INFO] –õ–æ–≥–∏ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤: runs/2025-10-02-1811-rare-koala/logs/run.log
[INFO] –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ (—Å–µ—Å—Å–∏—è: runs/2025-10-02-1811-rare-koala)
[INFO] –ò—â–µ–º RT-–ø–∞—Ç—á –¥–ª—è 5.10...
[OK] –ù–∞–π–¥–µ–Ω RT-–ø–∞—Ç—á: https://www.kernel.org/pub/linux/kernel/projects/rt/5.10/patch-5.10.244-rt138.patch.gz
...
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –æ—Ç—á—ë—Ç
```bash
cat runs/*/reports/combined-report.md | less
```

### –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å prebuilt parser.so
```bash
bash scripts/build_prebuilt.sh
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –≤ `runs/<timestamp>-<codename>/reports/combined-report.md` –ø–æ—è–≤–∏—Ç—Å—è –æ—Ç—á—ë—Ç.  

#### ‚úÖ –ò–¥–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (AST –∏ ML —Ä–∞–±–æ—Ç–∞—é—Ç)
```
# üìä –û—Ç—á—ë—Ç –ø–æ —è–¥—Ä—É 6.12 (–∏–¥–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π)

## üîπ AST-–∞–Ω–∞–ª–∏–∑
- AST-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å: –ø–æ–ª–µ `cpu_power` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–æ–≤–æ–µ API: `arch_scale_cpu_capacity()`

## üîπ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- –ü–æ–ª–µ `cpu_power` —É–¥–∞–ª–µ–Ω–æ ‚Üí –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ arch_scale_cpu_capacity()
- –§—É–Ω–∫—Ü–∏—è init_timer —É—Å—Ç–∞—Ä–µ–ª–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å timer_setup()

## üîπ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ struct sched_domain
- –ù–∞–π–¥–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: `struct sched_domain sd = { ... };`

## üîπ ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å 87%)

üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `cpu_power` –Ω–∞ `arch_scale_cpu_capacity()`
- –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `sched_domain` –ø–æ–¥ –Ω–æ–≤–æ–µ –ø–æ–ª–µ
```

#### ‚ö†Ô∏è Fallback-—Å—Ü–µ–Ω–∞—Ä–∏–π (AST –∏ ML –æ—Ç–∫–ª—é—á–µ–Ω—ã)
```
# üìä –û—Ç—á—ë—Ç –ø–æ —è–¥—Ä—É 6.12 (fallback-—Å—Ü–µ–Ω–∞—Ä–∏–π)

## üîπ AST-–∞–Ω–∞–ª–∏–∑
- [AST disabled]

## üîπ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

## üîπ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ struct sched_domain
- –ù–µ –Ω–∞–π–¥–µ–Ω–æ

## üîπ ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ML disabled]

üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ scheduler
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ ML –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è AST
```

---

## üìå –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã
- [CHECKLIST.md](CHECKLIST.md) ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- [SMOKE_TESTS.md](SMOKE_TESTS.md) ‚Äî –±—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- [FAQ.md](FAQ.md) ‚Äî –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- [TROUBLESHOOTING.md](TROUBLESHOOTING.md) ‚Äî —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
- [ROADMAP.md](ROADMAP.md) ‚Äî –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞
